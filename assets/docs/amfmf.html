<!DOCTYPE html>  <html> <head>   <title>amfmf.coffee</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="amfmf.html">                 amfmf.coffee               </a>                                           <a class="source" href="lineup.html">                 lineup.coffee               </a>                                           <a class="source" href="player.html">                 player.coffee               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               amfmf.coffee             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <p>AMFMF.coffee is a global singleton object used for
miscellaneous purposes.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">App.AMFMF = </span>
  </pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>We set some constants:</p>

<ul>
<li>The date of the event</li>
<li>And the twitter user to grab news from</li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">date: </span><span class="s">&quot;20121117&quot;</span>
  <span class="nv">username: </span><span class="s">&#39;infoamf&#39;</span>
  </pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>And then we start calling all our setup
functions.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">init: </span><span class="o">-&gt;</span>
    <span class="nx">do</span> <span class="nx">@slabText</span>
    <span class="nx">do</span> <span class="nx">@setupMenu</span>
    <span class="nx">do</span> <span class="nx">@showTimeLeft</span>
    <span class="nx">do</span> <span class="nx">@loadNews</span>
  </pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <h3>setupMenu</h3>             </td>             <td class="code">               <div class="highlight"><pre>    </pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p><code>setupMenu</code> intercepts click events 
to do the smooth scroll effect.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">setupMenu: </span><span class="o">-&gt;</span>
    <span class="nx">$</span><span class="p">(</span><span class="s">&#39;#menu a&#39;</span><span class="p">).</span><span class="kc">on</span> <span class="s">&#39;click&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> 
      <span class="nv">a = </span><span class="nx">$</span> <span class="nx">e</span><span class="p">.</span><span class="nx">currentTarget</span> 
      <span class="nv">section = </span><span class="nx">a</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s">&#39;section&#39;</span><span class="p">)</span>
      <span class="k">if</span> <span class="nx">section</span>
        <span class="nx">@showSection</span> <span class="nx">section</span>
        <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">()</span>
  </pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <h3>slabText</h3>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>Because slabText takes too much space, we
only apply the effect when the user is
browsing from a normal size non-iOS device.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">slabText: </span><span class="o">-&gt;</span>
    <span class="nx">unless</span> <span class="nx">App</span><span class="p">.</span><span class="nx">isiPhone</span>
      <span class="nx">WebFontConfig</span><span class="p">.</span><span class="nx">ready</span> <span class="o">-&gt;</span> 
        <span class="nx">$</span><span class="p">(</span><span class="s">&#39;.band h1&#39;</span><span class="p">).</span><span class="nx">slabText</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <h3>showSection</h3>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p><code>showSection</code> is used to smoothly scroll into a 
page section.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">showSection: </span><span class="nf">(section) -&gt;</span>
    <span class="k">return</span> <span class="nx">unless</span> <span class="nx">section</span>
    <span class="nx">$</span><span class="p">.</span><span class="nx">smoothScroll</span>
      <span class="nv">offset: </span><span class="o">-</span><span class="mi">55</span>
      <span class="nv">scrollTarget: </span><span class="s">&quot;</span><span class="err">#</span><span class="s">&quot;</span> <span class="o">+</span> <span class="nx">section</span>     
  </pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <h3>showTimeLeft</h3>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p><code>showTimeLeft</code> takes care of adding the time til' the event
date in the browser's title.     </p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">showTimeLeft: </span><span class="o">-&gt;</span>
    <span class="nv">fromNow = </span><span class="nx">moment</span><span class="p">(</span><span class="nx">@date</span><span class="p">,</span> <span class="s">&quot;YYYYMMDD&quot;</span><span class="p">).</span><span class="nx">fromNow</span><span class="p">()</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">title</span> <span class="o">+=</span> <span class="s">&quot; &quot;</span> <span class="o">+</span> <span class="nx">fromNow</span>
  
  </pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <h3>loadNews</h3>             </td>             <td class="code">               <div class="highlight"><pre>  </pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p><code>loadNews</code> fills the #news with the twitter feed.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">loadNews: </span><span class="o">-&gt;</span>
    <span class="vi">@news = </span><span class="nx">$</span> <span class="s">&#39;#news .container&#39;</span>
    <span class="nx">@news</span><span class="p">.</span><span class="nx">tweet</span> <span class="p">{</span><span class="nx">@username</span><span class="p">}</span>
 </pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <h3>App.isiPhone</h3>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p><code>App.isiPhone</code> is set to true when a small iOS device
(iPhone or iPod touch) is used to browse the site.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">App.isiPhone =</span>
  <span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">platform</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s">&quot;iPhone&quot;</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">or</span>
  <span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">platform</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s">&quot;iPod&quot;</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <h3>App.AMFMF.init</h3>             </td>             <td class="code">               <div class="highlight"><pre> </pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>We don't need to wait for <code>domready</code> to 
initialize AMFMF.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">do</span> <span class="nx">App</span><span class="p">.</span><span class="nx">AMFMF</span><span class="p">.</span><span class="nx">init</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 